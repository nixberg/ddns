name: ddns
base: core18
version: "1.0.0"
summary: Cloudflare DDNS client
description: etc
grade: stable
confinement: strict

apps:
  ddns:
    command: run
    daemon: simple
    restart-condition: on-abnormal
    plugs: [network]
  check:
    command: ddns check

parts:
  ddns:
    build-snaps:
      - go
    plugin: nil
    source: .
    override-build: |
      env GOBIN=$SNAPCRAFT_PART_INSTALL/bin GO111MODULE=on go install
  run:
    plugin: dump
    source: bin
    organize:
      run: bin/run
